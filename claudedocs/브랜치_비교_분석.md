# main vs main2 브랜치 구조 비교 분석

## 📊 개요

MLOps 프로젝트의 두 주요 브랜치인 `main`과 `main2`의 구조적 차이점과 특화 영역을 분석한 문서입니다.

## 📁 디렉토리 구조 차이점

### main 브랜치 전용 디렉토리
```
./conf/              # 설정 디렉토리
./dags/              # Airflow DAG 파일들
./src/indices/       # 인덱스 관련
./src/catboost_info/ # CatBoost 정보
```

### main2 브랜치 전용 디렉토리
```
./api/               # API 관련
./dockerfiles/       # Docker 파일들
./models/            # 저장된 모델들
./notebooks/fonts/   # 노트북 폰트
./src/preprocessing/ # 전처리 모듈
```

## 📄 파일 수 비교

| 브랜치 | 파일 수 |
|--------|---------|
| main   | 38개    |
| main2  | 30개    |

## 🎯 브랜치별 고유 파일 분석

### main 브랜치 전용 파일들 (31개)

#### 🔄 데이터 파이프라인 & Airflow
- `dags/weather_data_pipeline.py`
- `docker-compose-airflow.yaml`

#### 📚 체계적 문서화 (10단계 가이드)
- `docs/01_초기_마스터_데이터_업로드.md`
- `docs/02_UV데이터_제거_작업.md`
- `docs/03_추론용_라벨_분리_작업.md`
- `docs/04_롤링윈도우_구현.md`
- `docs/05_피처엔지니어링_가이드.md`
- `docs/06_S3_데이터파이프라인.md`
- `docs/07_전체_파이프라인_개요.md`
- `docs/08_ML데이터셋_컬럼정의.md`
- `docs/09_FastAPI_서버가이드.md`
- `docs/10_S3_버킷_구조.md`
- `docs/README.md`

#### 🚀 프로덕션 서빙 인프라
- `src/serving/server.py`
- `requirements-api.txt`
- `tests/test_api.py`

#### ☁️ 클라우드 & 스토리지
- `src/storage/__init__.py`
- `src/storage/s3_client.py`

#### 🌤️ 기상 데이터 수집
- `src/data/kma_client.py`
- `src/data/parsers.py`
- `src/data/weather_processor.py`

#### 🔧 기타 인프라
- `src/features/feature_builder.py`
- `src/config/models.yaml`
- `src/utils/config.py`
- `src/utils/logger_config.py`

### main2 브랜치 전용 파일들 (24개)

#### 🤖 모델 훈련 & 실험
- `src/models/train.py`
- `src/models/tune.py`
- `src/models/split.py`
- `src/utils/model_utils.py`
- `src/utils/wandb_utils.py`

#### 📊 데이터 수집 & 전처리
- `src/data/crawler.py`
- `src/data/data_cleaning.py`
- `src/data/preprocessing.py`
- `src/data/s3_pull_processed.py`
- `src/data/s3_pull.py`
- `src/data/s3_push.py`
- `src/data/weather_collector.py`
- `src/preprocessing/clean_data.py`

#### 🌐 API 서비스
- `api/main.py`

#### 📝 개발 문서
- `docs/dag_plan.md`
- `docs/data_cleaning.md`
- `docs/dummy.md`
- `docs/flow.md`
- `docs/model_test.md`
- `docs/models_plan.md`
- `docs/plan.md`
- `docs/planFors3emerge.md`

## 💡 브랜치별 특화 영역 매트릭스

| 영역 | main | main2 | 설명 |
|------|------|-------|------|
| **데이터 파이프라인** | ✅ 완성 | 🔄 기본 | main: Airflow 기반 체계적 파이프라인 |
| **모델 훈련** | 🔄 기본 | ✅ 완성 | main2: WandB 통합 실험 관리 |
| **프로덕션 서빙** | ✅ 완성 | 🔄 기본 | main: FastAPI 기반 완전한 서빙 |
| **실험 관리** | 🔄 기본 | ✅ 완성 | main2: 체계적 하이퍼파라미터 튜닝 |
| **문서화** | ✅ 체계적 | 🔄 개발 중 | main: 10단계 상세 가이드 |
| **클라우드 통합** | ✅ 완성 | 🔄 부분적 | main: S3 전문 클라이언트 |
| **데이터 수집** | ✅ KMA API | ✅ 크롤러 | 서로 다른 접근 방식 |

## 🎯 주요 차이점 요약

### main 브랜치: **프로덕션 중심 MLOps**
- **목적**: 완전한 프로덕션 배포 파이프라인
- **강점**: Airflow, FastAPI, S3 통합, 체계적 문서화
- **사용 시나리오**: 실제 서비스 운영, 안정적 배포

### main2 브랜치: **모델 개발 중심**
- **목적**: 모델 실험과 개발 최적화
- **강점**: WandB 실험 추적, 하이퍼파라미터 튜닝, 다양한 데이터 수집
- **사용 시나리오**: 모델 연구, 성능 개선, 실험 관리

## 🔄 브랜치 선택 가이드

### main 브랜치를 선택해야 할 때:
- 프로덕션 환경 구축이 필요한 경우
- 안정적인 데이터 파이프라인이 필요한 경우
- API 서빙 인프라가 필요한 경우
- 체계적인 문서화가 중요한 경우

### main2 브랜치를 선택해야 할 때:
- 새로운 모델 개발과 실험이 주 목적인 경우
- WandB를 활용한 실험 추적이 필요한 경우
- 다양한 데이터 수집 방법을 시도해야 하는 경우
- 하이퍼파라미터 튜닝에 집중해야 하는 경우

## 📈 향후 통합 방향

두 브랜치의 장점을 결합하여:
1. **main의 프로덕션 인프라** + **main2의 실험 관리 시스템**
2. **안정적인 배포 환경**에서 **지속적인 모델 개선**
3. **체계적인 문서화**와 **실험 추적**의 통합

---

*분석 날짜: 2025-09-29*
*분석자: Claude Code Assistant*