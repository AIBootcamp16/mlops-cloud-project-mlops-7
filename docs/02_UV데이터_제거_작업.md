# UV ë°ì´í„° ì œê±° ì‘ì—… ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“‹ ì‘ì—… ê°œìš”

ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ ë¡œì§ê³¼ ê³¼ê±° í•™ìŠµ ë°ì´í„° ê°„ì˜ **ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ**ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ UV(ìì™¸ì„  ì§€ìˆ˜) ê´€ë ¨ ì½”ë“œë¥¼ ì™„ì „íˆ ì œê±°í–ˆìŠµë‹ˆë‹¤.

## ğŸš¨ ë¬¸ì œ ìƒí™©

### ë°œê²¬ëœ ì´ìŠˆ
- **ì‹¤ì‹œê°„ ë¡œì§**: UV ë°ì´í„° ì²˜ë¦¬ ì½”ë“œ í¬í•¨
- **ê³¼ê±° í•™ìŠµ ë°ì´í„°**: UV ë°ì´í„° ì‹¤ì œë¡œëŠ” ì—†ìŒ
- **ê²°ê³¼**: ì‹¤ì‹œê°„ ì¶”ë¡ ê³¼ ëª¨ë¸ í•™ìŠµ ê°„ í”¼ì²˜ ë¶ˆì¼ì¹˜

### ë¬¸ì œ ì˜í–¥
- ëª¨ë¸ í•™ìŠµ ì‹œ UV í”¼ì²˜ ëˆ„ë½ìœ¼ë¡œ ì¸í•œ ë¶ˆì¼ì¹˜
- ì‹¤ì‹œê°„ ì¶”ë¡  ì‹œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” UV í”¼ì²˜ë¡œ ì¸í•œ ì˜¤ë¥˜ ê°€ëŠ¥ì„±
- ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì•ˆì •ì„± ì €í•˜

## ğŸ”§ ì œê±° ì‘ì—… ìƒì„¸

### 1. íŒŒì„œ ëª¨ë“ˆ ìˆ˜ì •

**íŒŒì¼**: `src/data/parsers.py`

**ì œê±°ëœ ë‚´ìš©**:
```python
# âŒ ì œê±°ë¨
def parse_uv_raw(raw_data: str) -> List[Dict[str, Any]]:
    """Parse UV raw data from KMA API"""
    # ... UV íŒŒì‹± ë¡œì§ ì „ì²´
```

**ìˆ˜ì •ëœ export**:
```python
# Before
__all__ = ["extract_measurements", "parse_asos_raw", "parse_pm10_raw", "parse_uv_raw"]

# After
__all__ = ["extract_measurements", "parse_asos_raw", "parse_pm10_raw"]
```

### 2. WeatherDataProcessor ìˆ˜ì •

**íŒŒì¼**: `src/data/weather_processor.py`

**ì œê±°ëœ import**:
```python
# âŒ ì œê±°ë¨ - UV íŒŒì„œ import ì œê±°
```

**ì œê±°ëœ ì²˜ë¦¬ ë¡œì§**:
- UV ë°ì´í„° íŒŒì‹± í˜¸ì¶œ ì œê±°
- UV ë°ì´í„° S3 ì €ì¥ ë¡œì§ ì œê±°
- UV ê´€ë ¨ ë¡œê·¸ ë©”ì‹œì§€ ì œê±°

### 3. Feature Builder ìˆ˜ì •

**íŒŒì¼**: `src/features/feature_builder.py`

**ì œê±°ëœ í”¼ì²˜ë“¤**:
```python
# âŒ ì œê±°ëœ UV ê´€ë ¨ í”¼ì²˜ë“¤
- uv_index: UV ì§€ìˆ˜ ì›ë³¸ ê°’
- uv_level: UV ë“±ê¸‰ (low/moderate/high/very_high/extreme)
- sun_protection_needed: ìì™¸ì„  ì°¨ë‹¨ í•„ìš” ì—¬ë¶€
- outdoor_safe_time: ì•ˆì „í•œ ì•¼ì™¸ í™œë™ ì‹œê°„
```

**ìˆ˜ì •ëœ í”¼ì²˜ ìˆ˜**:
- **Before**: 48ê°œ ì›ë³¸ ì»¬ëŸ¼ â†’ 38ê°œ ML í”¼ì²˜
- **After**: 48ê°œ ì›ë³¸ ì»¬ëŸ¼ â†’ 34ê°œ ML í”¼ì²˜ (UV í”¼ì²˜ 4ê°œ ì œê±°)

### 4. ì¾Œì ì§€ìˆ˜ ê³„ì‚° ìˆ˜ì •

**íŒŒì¼**: `src/features/feature_builder.py` - `calculate_comfort_score()`

**ì œê±°ëœ ê³„ì‚° ë¡œì§**:
```python
# âŒ ì œê±°ë¨
# UV ì ìˆ˜ ê³„ì‚° (20% ë¹„ì¤‘)
if 'uv_index' in df.columns:
    uv_score = df['uv_index'].map(lambda x:
        90 if pd.isna(x) or x <= 2 else      # ë‚®ìŒ
        70 if x <= 5 else                    # ë³´í†µ
        50 if x <= 7 else                    # ë†’ìŒ
        30 if x <= 10 else                   # ë§¤ìš°ë†’ìŒ
        10  # ìœ„í—˜
    )
    scores = scores * 0.8 + uv_score * 0.2
```

**ìˆ˜ì •ëœ ê³„ì‚° ë¡œì§**:
- UV ì ìˆ˜ ë¹„ì¤‘ 20% ì œê±°
- ê¸°ì˜¨(50%) + ë¯¸ì„¸ë¨¼ì§€(30%) + ê¸°íƒ€ ë³´ì •(20%)ìœ¼ë¡œ ì¬ì¡°ì •
- ì „ì²´ 100ì  ë§Œì  êµ¬ì¡° ìœ ì§€

## ğŸ“Š ë°ì´í„° ìŠ¤í‚¤ë§ˆ ë³€í™”

### Feature Engineering Pipeline

**Before (UV í¬í•¨)**:
```
ì›ë³¸ 48ê°œ ì»¬ëŸ¼ â†’ 38ê°œ ML í”¼ì²˜
â”œâ”€â”€ ê¸°ë³¸ í”¼ì²˜: 30ê°œ
â”œâ”€â”€ UV í”¼ì²˜: 4ê°œ âŒ
â””â”€â”€ ê¸°íƒ€ í”¼ì²˜: 4ê°œ
```

**After (UV ì œê±°)**:
```
ì›ë³¸ 48ê°œ ì»¬ëŸ¼ â†’ 34ê°œ ML í”¼ì²˜
â”œâ”€â”€ ê¸°ë³¸ í”¼ì²˜: 30ê°œ
â””â”€â”€ ê¸°íƒ€ í”¼ì²˜: 4ê°œ
```

### ì œê±°ëœ ML í”¼ì²˜ ëª©ë¡

| í”¼ì²˜ëª… | ì„¤ëª… | ë°ì´í„° íƒ€ì… |
|--------|------|------------|
| `uv_index` | UV ì§€ìˆ˜ ì›ë³¸ ê°’ | float |
| `uv_level` | UV ë“±ê¸‰ (categorical) | string |
| `sun_protection_needed` | ìì™¸ì„  ì°¨ë‹¨ í•„ìš” ì—¬ë¶€ | boolean |
| `outdoor_safe_time` | ì•ˆì „í•œ ì•¼ì™¸ í™œë™ ì‹œê°„ (ë¶„) | integer |

### ì˜í–¥ë°›ëŠ” ë°ì´í„° íŒŒì¼ë“¤

**ì‹¤ì‹œê°„ ë°ì´í„°**:
- ML ë°ì´í„°ì…‹: 38ê°œ â†’ 34ê°œ í”¼ì²˜ë¡œ ë³€ê²½
- íŒŒì‹± ë¡œì§: UV ì²˜ë¦¬ ë‹¨ê³„ ì™„ì „ ì œê±°

**í•™ìŠµ ë°ì´í„°**:
- ê¸°ì¡´ ê³¼ê±° ë°ì´í„°ì™€ ì¼ì¹˜ (ì›ë˜ UV ì—†ì—ˆìŒ)
- ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ í•´ê²°

## ğŸ”„ ì½”ë“œ í˜¸í™˜ì„±

### Backward Compatibility
- **ê¸°ì¡´ ëª¨ë¸**: UV í”¼ì²˜ ì—†ì´ í•™ìŠµëœ ëª¨ë¸ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥
- **ìƒˆë¡œìš´ ì¶”ë¡ **: UV í”¼ì²˜ ì—†ì´ ì¶”ë¡  ì§„í–‰, ì•ˆì •ì„± í–¥ìƒ
- **ë°ì´í„° íŒŒì´í”„ë¼ì¸**: ì¼ê´€ëœ ìŠ¤í‚¤ë§ˆë¡œ ì•ˆì •í™”

### Forward Compatibility
- í–¥í›„ UV ë°ì´í„°ê°€ ì‹¤ì œë¡œ ì œê³µë˜ë©´ ì‰½ê²Œ ì¬ì¶”ê°€ ê°€ëŠ¥
- íŒŒì„œ êµ¬ì¡°ëŠ” í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ìœ ì§€
- Feature builder êµ¬ì¡°ë„ ì¶”ê°€ í™•ì¥ ìš©ì´

## âœ… ê²€ì¦ ê²°ê³¼

### 1. ì½”ë“œ ë™ì‘ ê²€ì¦
- **íŒŒì‹± ë¡œì§**: ASOS, PM10ë§Œ ì •ìƒ ì²˜ë¦¬ í™•ì¸
- **í”¼ì²˜ ìƒì„±**: 34ê°œ í”¼ì²˜ ì •ìƒ ìƒì„± í™•ì¸
- **ML ë°ì´í„°ì…‹**: UV ê´€ë ¨ ì˜¤ë¥˜ ì—†ì´ ìƒì„± ì™„ë£Œ

### 2. ë°ì´í„° í’ˆì§ˆ ê²€ì¦
- **ì‹¤ì‹œê°„-í•™ìŠµ ìŠ¤í‚¤ë§ˆ**: ì™„ì „ ì¼ì¹˜ í™•ì¸
- **í”¼ì²˜ ìˆ˜**: ì¼ê´€ì„± ìˆê²Œ 34ê°œë¡œ í†µì¼
- **null ê°’ ì²˜ë¦¬**: UV ê´€ë ¨ null ì˜¤ë¥˜ ì™„ì „ ì œê±°

### 3. ì„±ëŠ¥ ì˜í–¥
- **ì²˜ë¦¬ ì†ë„**: UV íŒŒì‹± ë‹¨ê³„ ì œê±°ë¡œ ì•½ê°„ í–¥ìƒ
- **ë©”ëª¨ë¦¬ ì‚¬ìš©**: ë¶ˆí•„ìš”í•œ UV ë°ì´í„° ì²˜ë¦¬ ì œê±°ë¡œ ì ˆì•½
- **ì•ˆì •ì„±**: ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ì˜¤ë¥˜ ì™„ì „ í•´ê²°

## ğŸ“ˆ ì¾Œì ì§€ìˆ˜ ê³„ì‚° ì˜í–¥

### ê³„ì‚° ë¡œì§ ë³€ê²½
- **Before**: ê¸°ì˜¨(40%) + ë¯¸ì„¸ë¨¼ì§€(20%) + UV(20%) + ê¸°íƒ€(20%)
- **After**: ê¸°ì˜¨(50%) + ë¯¸ì„¸ë¨¼ì§€(30%) + ê¸°íƒ€(20%)

### ì˜í–¥ ë¶„ì„
- **ê¸°ì˜¨ ì¤‘ìš”ë„ ì¦ê°€**: 40% â†’ 50% (ë” í˜„ì‹¤ì )
- **ë¯¸ì„¸ë¨¼ì§€ ì¤‘ìš”ë„ ì¦ê°€**: 20% â†’ 30% (í•œêµ­ ìƒí™© ë°˜ì˜)
- **ì „ì²´ ë¡œì§**: ì—¬ì „íˆ 0-100ì  ë²”ìœ„ ìœ ì§€
- **í’ˆì§ˆ**: UV ì—†ì–´ë„ ì—¬ì „íˆ ì˜ë¯¸ìˆëŠ” ì¾Œì ì§€ìˆ˜ ì œê³µ

## ğŸš€ ì ìš© ìƒíƒœ

### ì™„ë£Œëœ ì‘ì—…
- âœ… **ì½”ë“œ ì œê±°**: ëª¨ë“  UV ê´€ë ¨ ì½”ë“œ ì™„ì „ ì œê±°
- âœ… **ìŠ¤í‚¤ë§ˆ í†µì¼**: ì‹¤ì‹œê°„-í•™ìŠµ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì¼ì¹˜
- âœ… **í…ŒìŠ¤íŠ¸ ê²€ì¦**: ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¡œ ì •ìƒ ë™ì‘ í™•ì¸
- âœ… **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: FEATURE_ENGINEERING_GUIDE.md ë°˜ì˜ ì™„ë£Œ

### ë°°í¬ ìƒíƒœ
- **ì½”ë“œ ë³€ê²½**: ì¦‰ì‹œ ì ìš©ë¨
- **ì‹¤ì‹œê°„ ì²˜ë¦¬**: ë‹¤ìŒ Airflow ì‹¤í–‰ë¶€í„° UV ì œì™¸ ì²˜ë¦¬
- **ê¸°ì¡´ ë°ì´í„°**: ê¸°ì¡´ í•™ìŠµ ë°ì´í„°ëŠ” ë³€ê²½ ì—†ìŒ (ì›ë˜ UV ì—†ì—ˆìŒ)

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ëª¨ë¸ ì¬í•™ìŠµ ë¶ˆí•„ìš”
- ê¸°ì¡´ í•™ìŠµ ë°ì´í„°ì— UV ì—†ì—ˆìœ¼ë¯€ë¡œ ëª¨ë¸ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥
- ì‹¤ì‹œê°„ ì¶”ë¡ ê³¼ í•™ìŠµ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì´ì œ ì™„ì „ ì¼ì¹˜

### 2. í–¥í›„ UV ë°ì´í„° ì¶”ê°€ ì‹œ
- KMA APIì—ì„œ UV ë°ì´í„° ì‹¤ì œ ì œê³µ ì‹œ ì¬ì¶”ê°€ ê²€í†  ê°€ëŠ¥
- ê·¸ë•ŒëŠ” ê³¼ê±° ë°ì´í„°ë„ í•¨ê»˜ ë³´ê°• í•„ìš”
- í˜„ì¬ëŠ” ì‹¤ì œ UV ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ ì œê±°ê°€ ì˜¬ë°”ë¥¸ ì„ íƒ

### 3. ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸
- ì‹¤ì‹œê°„ ì²˜ë¦¬ ë¡œê·¸ì—ì„œ UV ê´€ë ¨ ì˜¤ë¥˜ ë©”ì‹œì§€ ì‚¬ë¼ì§ í™•ì¸
- ML ë°ì´í„°ì…‹ í”¼ì²˜ ìˆ˜ 34ê°œ ìœ ì§€ í™•ì¸
- ì¾Œì ì§€ìˆ˜ ê³„ì‚° ì •ìƒ ë™ì‘ í™•ì¸

## ğŸ“ ë¬¸ì˜ ì‚¬í•­

UV ë°ì´í„° ê´€ë ¨ ë¬¸ì˜ì‚¬í•­:
1. **ì‹¤ì‹œê°„ ì²˜ë¦¬ ì˜¤ë¥˜**: UV ê´€ë ¨ ì˜¤ë¥˜ëŠ” ì´ì œ ë°œìƒí•˜ì§€ ì•ŠìŒ
2. **í”¼ì²˜ ìˆ˜ ë³€í™”**: 38ê°œ â†’ 34ê°œëŠ” ì •ìƒ (UV 4ê°œ ì œê±°)
3. **ëª¨ë¸ ì„±ëŠ¥**: UV ì—†ì–´ë„ ê¸°ì˜¨+ë¯¸ì„¸ë¨¼ì§€ë¡œ ì¶©ë¶„í•œ ì˜ˆì¸¡ í’ˆì§ˆ ìœ ì§€

---

**ì‘ì„±ì¼**: 2025-09-26
**ì‘ì—…ì**: Claude
**ì˜í–¥ë²”ìœ„**: ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬, Feature Engineering
**ìƒíƒœ**: ì™„ë£Œ ë° ìš´ì˜ ì ìš©ë¨