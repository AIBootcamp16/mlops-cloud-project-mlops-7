# 모델링팀 데이터 접근 가이드

## 📊 데이터 경로 (고정)

### 학습용 데이터
```
s3://weather-mlops-team-data/ml_dataset/train/latest.parquet
```
- **업데이트 주기**: 매시간 자동 업데이트 (덮어쓰기)
- **데이터 범위**: 최신 1시간 데이터 (34개 feature)
- **용도**: 모델 학습 및 검증

### 예측용 데이터
```
s3://weather-mlops-team-data/ml_dataset/predict/latest.parquet
```
- **업데이트 주기**: 필요시 업데이트
- **데이터 형식**: train/과 동일한 34개 feature
- **용도**: 실시간 예측 입력 데이터

### 마스터 학습 데이터
```
s3://weather-mlops-team-data/weather_pm10_integrated_full.csv
```
- **업데이트 주기**: 매시간 누적, 주 1회 정리 (일요일 새벽 2시)
- **데이터 범위**: 21개월 (630일) Rolling Window
- **용도**: 대규모 모델 재학습

## 💻 코드 예시

### Python (pandas)
```python
import pandas as pd

# 학습용 데이터
train_df = pd.read_parquet('s3://weather-mlops-team-data/ml_dataset/train/latest.parquet')

# 예측용 데이터
predict_df = pd.read_parquet('s3://weather-mlops-team-data/ml_dataset/predict/latest.parquet')

# 마스터 학습 데이터
master_df = pd.read_csv('s3://weather-mlops-team-data/weather_pm10_integrated_full.csv')
```

### Python (boto3)
```python
import boto3
import pandas as pd

s3 = boto3.client('s3')

# 학습용 데이터
s3.download_file('weather-mlops-team-data', 'ml_dataset/train/latest.parquet', 'train.parquet')
train_df = pd.read_parquet('train.parquet')

# 예측용 데이터
s3.download_file('weather-mlops-team-data', 'ml_dataset/predict/latest.parquet', 'predict.parquet')
predict_df = pd.read_parquet('predict.parquet')

# 마스터 학습 데이터
s3.download_file('weather-mlops-team-data', 'weather_pm10_integrated_full.csv', 'master.csv')
master_df = pd.read_csv('master.csv')
```

## ✅ 장점

1. **고정 경로**: 월/일/시간이 바뀌어도 경로 변경 없음
2. **자동 최신화**: 매시간 자동으로 최신 데이터로 업데이트
3. **단순성**: 파일 검색 로직 불필요, 바로 접근
4. **신뢰성**: 항상 최신 21개월 데이터 보장
5. **학습/예측 분리**: train/과 predict/ 폴더로 용도 명확히 구분

## 📝 참고사항

- `train/latest.parquet`: 매시간 자동 업데이트 (학습 및 검증용)
- `predict/latest.parquet`: 예측 입력 데이터 저장 (모델링팀에서 관리)
- 마스터 CSV는 오래된 데이터(630일 이전)가 주 1회 자동 삭제됨
- 중복 데이터는 자동으로 제거됨 (datetime + STN 기준)
